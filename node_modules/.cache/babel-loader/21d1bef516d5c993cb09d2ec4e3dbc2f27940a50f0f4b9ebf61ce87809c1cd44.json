{"ast":null,"code":"import _slicedToArray from\"/Users/JACKRAJN/VisualStudioCodeProjects/learning-react/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Card from'./shared/Card';import Button from'./shared/Button';import RatingSelect from'./RatingSelect';import{useContext}from'react';import FeedbackContext from'../context/FeedbackContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisable=_useState4[0],setBtnDisable=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback,setFeedbackEdit=_useContext.setFeedbackEdit;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisable(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisable(true);setMessage(null);}else if(text!==null&&text.trim().length<=10){setBtnDisable(true);setMessage('Text must be at least 10 characters!');}else{setBtnDisable(false);setMessage(null);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(rating===null||rating===undefined){setMessage('Please select a rating');}else{if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText('');setMessage('');setFeedbackEdit({item:{},edit:false});}}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:setRating,selected:rating}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisable,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}","map":{"version":3,"names":["React","useState","useEffect","Card","Button","RatingSelect","useContext","FeedbackContext","jsx","_jsx","jsxs","_jsxs","FeedbackForm","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","btnDisable","setBtnDisable","_useState5","_useState6","message","setMessage","_useState7","_useState8","rating","setRating","_useContext","addFeedback","feedbackEdit","updateFeedback","setFeedbackEdit","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","undefined","newFeedback","id","children","onSubmit","select","selected","className","onChange","type","placeholder","isDisabled"],"sources":["/Users/JACKRAJN/VisualStudioCodeProjects/learning-react/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Card from './shared/Card'\nimport Button from './shared/Button'\nimport RatingSelect from './RatingSelect'\nimport { useContext } from 'react'\nimport FeedbackContext from '../context/FeedbackContext'\n\nexport default function FeedbackForm() {\n\n    const [text, setText] = useState('')\n    const [btnDisable, setBtnDisable] = useState(true)\n    const [message, setMessage] = useState('')\n    const [rating, setRating] = useState()\n\n    const { addFeedback, feedbackEdit, updateFeedback, setFeedbackEdit} = useContext(FeedbackContext)\n\n    useEffect(() => {\n        if(feedbackEdit.edit === true){\n            setBtnDisable(false)\n            setText(feedbackEdit.item.text)\n            setRating(feedbackEdit.item.rating)\n        } \n    },[feedbackEdit]);\n\n    const handleTextChange = (e) => {\n        if(text === ''){\n            setBtnDisable(true);\n            setMessage(null)\n        } else if (text !== null && text.trim().length <= 10){\n            setBtnDisable(true);\n            setMessage('Text must be at least 10 characters!')\n        } else {\n            setBtnDisable(false);\n            setMessage(null)\n        }\n        setText(e.target.value)\n    }\n\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        if(rating === null || rating === undefined) {\n            setMessage('Please select a rating')\n        } else {\n            if(text.trim().length > 10){\n                const newFeedback = {\n                    text: text,\n                    rating: rating,\n                }\n\n                if(feedbackEdit.edit === true){\n                    updateFeedback(feedbackEdit.item.id, newFeedback)\n                }else{\n                    addFeedback(newFeedback)\n                }\n                setText('')\n                setMessage('')\n                setFeedbackEdit({\n                    item: {},\n                    edit: false\n                })\n            }\n        }\n    }\n\n\n  return (\n    <Card>\n        <form onSubmit={handleSubmit}> \n            <h2>How would you rate your service with us?</h2>\n            <RatingSelect select={setRating} selected={rating} />\n            <div className='input-group'>\n                <input\n                    onChange={handleTextChange} \n                    type='text' \n                    placeholder='Write a review'\n                    value={text}/>\n                <Button type='submit' isDisabled={btnDisable}>Send</Button>\n            </div>\n            {message && <div className='message'>{message}</div>}\n        </form>\n    </Card>\n  )\n}\n"],"mappings":"0JAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CACpC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,eAAe,KAAM,4BAA4B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExD,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CAEnC,IAAAC,SAAA,CAAwBZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAoCjB,QAAQ,CAAC,IAAI,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA3CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,IAAAG,UAAA,CAA8BrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA4BzB,QAAQ,CAAC,CAAC,CAAA0B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA/BE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAExB,IAAAG,WAAA,CAAsExB,UAAU,CAACC,eAAe,CAAC,CAAzFwB,WAAW,CAAAD,WAAA,CAAXC,WAAW,CAAEC,YAAY,CAAAF,WAAA,CAAZE,YAAY,CAAEC,cAAc,CAAAH,WAAA,CAAdG,cAAc,CAAEC,eAAe,CAAAJ,WAAA,CAAfI,eAAe,CAElEhC,SAAS,CAAC,UAAM,CACZ,GAAG8B,YAAY,CAACG,IAAI,GAAK,IAAI,CAAC,CAC1Bd,aAAa,CAAC,KAAK,CAAC,CACpBJ,OAAO,CAACe,YAAY,CAACI,IAAI,CAACpB,IAAI,CAAC,CAC/Ba,SAAS,CAACG,YAAY,CAACI,IAAI,CAACR,MAAM,CAAC,CACvC,CACJ,CAAC,CAAC,CAACI,YAAY,CAAC,CAAC,CAEjB,GAAM,CAAAK,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,CAAC,CAAK,CAC5B,GAAGtB,IAAI,GAAK,EAAE,CAAC,CACXK,aAAa,CAAC,IAAI,CAAC,CACnBI,UAAU,CAAC,IAAI,CAAC,CACpB,CAAC,IAAM,IAAIT,IAAI,GAAK,IAAI,EAAIA,IAAI,CAACuB,IAAI,CAAC,CAAC,CAACC,MAAM,EAAI,EAAE,CAAC,CACjDnB,aAAa,CAAC,IAAI,CAAC,CACnBI,UAAU,CAAC,sCAAsC,CAAC,CACtD,CAAC,IAAM,CACHJ,aAAa,CAAC,KAAK,CAAC,CACpBI,UAAU,CAAC,IAAI,CAAC,CACpB,CACAR,OAAO,CAACqB,CAAC,CAACG,MAAM,CAACC,KAAK,CAAC,CAC3B,CAAC,CAGD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIL,CAAC,CAAK,CACxBA,CAAC,CAACM,cAAc,CAAC,CAAC,CAElB,GAAGhB,MAAM,GAAK,IAAI,EAAIA,MAAM,GAAKiB,SAAS,CAAE,CACxCpB,UAAU,CAAC,wBAAwB,CAAC,CACxC,CAAC,IAAM,CACH,GAAGT,IAAI,CAACuB,IAAI,CAAC,CAAC,CAACC,MAAM,CAAG,EAAE,CAAC,CACvB,GAAM,CAAAM,WAAW,CAAG,CAChB9B,IAAI,CAAEA,IAAI,CACVY,MAAM,CAAEA,MACZ,CAAC,CAED,GAAGI,YAAY,CAACG,IAAI,GAAK,IAAI,CAAC,CAC1BF,cAAc,CAACD,YAAY,CAACI,IAAI,CAACW,EAAE,CAAED,WAAW,CAAC,CACrD,CAAC,IAAI,CACDf,WAAW,CAACe,WAAW,CAAC,CAC5B,CACA7B,OAAO,CAAC,EAAE,CAAC,CACXQ,UAAU,CAAC,EAAE,CAAC,CACdS,eAAe,CAAC,CACZE,IAAI,CAAE,CAAC,CAAC,CACRD,IAAI,CAAE,KACV,CAAC,CAAC,CACN,CACJ,CACJ,CAAC,CAGH,mBACE1B,IAAA,CAACN,IAAI,EAAA6C,QAAA,cACDrC,KAAA,SAAMsC,QAAQ,CAAEN,YAAa,CAAAK,QAAA,eACzBvC,IAAA,OAAAuC,QAAA,CAAI,0CAAwC,CAAI,CAAC,cACjDvC,IAAA,CAACJ,YAAY,EAAC6C,MAAM,CAAErB,SAAU,CAACsB,QAAQ,CAAEvB,MAAO,CAAE,CAAC,cACrDjB,KAAA,QAAKyC,SAAS,CAAC,aAAa,CAAAJ,QAAA,eACxBvC,IAAA,UACI4C,QAAQ,CAAEhB,gBAAiB,CAC3BiB,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gBAAgB,CAC5Bb,KAAK,CAAE1B,IAAK,CAAC,CAAC,cAClBP,IAAA,CAACL,MAAM,EAACkD,IAAI,CAAC,QAAQ,CAACE,UAAU,CAAEpC,UAAW,CAAA4B,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC1D,CAAC,CACLxB,OAAO,eAAIf,IAAA,QAAK2C,SAAS,CAAC,SAAS,CAAAJ,QAAA,CAAExB,OAAO,CAAM,CAAC,EAClD,CAAC,CACL,CAAC,CAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}